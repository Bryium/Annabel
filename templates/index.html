{% extends 'base.html' %} {% block content %}
<!-- Loading Screen -->
<div id="loading-screen">
  <div id="loading-slideshow">
    <!-- Animation for greeting -->
    <div id="loading-message" class="loading-message">
      <p>Happy Birthday to Me!</p>
    </div>
    <!-- Videos -->
    <video autoplay muted loop id="video-player">
      <source
        src="{{ url_for('static', filename='videos/Video 1.mp4') }}"
        type="video/mp4"
      />
      Your browser does not support the video tag.
    </video>
    <!-- Images -->
    <img
      src="{{ url_for('static', filename='images/photo 1.jpg') }}"
      alt="Loading Image 1"
      id="loading-image"
    />
  </div>
</div>

<!-- Main Content -->
<div id="main-content" style="display: none">
  <section id="greeting">
    <h1>
      Feeling incredibly grateful as I celebrate another year of life! I'm so
      thankful for all the moments, the memories, and the wonderful people who
      have been a part of this journey. Here's to a year filled with growth,
      joy, and better mental health!
    </h1>
    <h3>
      Today is all about cherishing the past, celebrating the present, and
      looking forward to creating even more amazing memories together! Thank you
      all for being a part of my story.
    </h3>
  </section>

  <section id="memories">
    <h2>Shared Memories</h2>
    <div class="gallery">
      <img
        src="{{ url_for('static', filename='images/photo 1.jpg') }}"
        alt="Memory 1"
      />
      <img
        src="{{ url_for('static', filename='images/photo 2.jpg') }}"
        alt="Memory 2"
      />
      <!-- Videos -->
      <video controls id="video-1">
        <source
          src="{{ url_for('static', filename='Video 1.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
      <video controls id="video-2">
        <source
          src="{{ url_for('static', filename='Video 2.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
      <video controls id="video-3">
        <source
          src="{{ url_for('static', filename='Video 3.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
      <video controls id="video-4">
        <source
          src="{{ url_for('static', filename='Video 4.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
      <video controls id="video-5">
        <source
          src="{{ url_for('static', filename='Video 5.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
      <video controls id="video-6">
        <source
          src="{{ url_for('static', filename='Video 6.mp4') }}"
          type="video/mp4"
        />
        Your browser does not support the video tag.
      </video>
    </div>
  </section>

  <section id="actions">
    <h2>Celebrate with Annabel</h2>
    <div>
      <!-- WhatsApp Button -->
      <a
        href="https://wa.me/?text=Happy%20Birthday%20Annabel!%20Wishing%20you%20a%20fantastic%20day%20filled%20with%20joy%20and%20love!"
        target="_blank"
        class="button"
      >
        Wish on WhatsApp
      </a>
      <!-- M-Pesa Button -->
      <a href="https://www.safaricom.com/mpesa" target="_blank" class="button">
        Send a Gift via M-Pesa
      </a>
    </div>
  </section>
</div>

<!-- JavaScript for Loading Screen -->
<script>
  window.onload = function () {
    let currentIndex = 0;
    const videos = [
      "{{ url_for('static', filename='Video 1.mp4') }}",
      "{{ url_for('static', filename='Video 2.mp4') }}",
      "{{ url_for('static', filename='Video 3.mp4') }}",
      "{{ url_for('static', filename='Video 4.mp4') }}",
      "{{ url_for('static', filename='Video 5.mp4') }}",
      "{{ url_for('static', filename='Video 6.mp4') }}",
    ];
    const images = [
      "{{ url_for('static', filename='images/photo 1.jpg') }}",
      "{{ url_for('static', filename='images/photo 2.jpg') }}",
    ];
    const videoPlayer = document.getElementById("video-player");
    const loadingImage = document.getElementById("loading-image");
    const loadingMessage = document.getElementById("loading-message");

    // Function to play the video
    function playVideo(videoId) {
      const videoElement = document.getElementById(videoId);
      if (videoElement) {
        videoElement.play(); // Play the video
      }
    }

    // Function to start the slideshow after the message animation
    function startSlideshow() {
      const slideshowInterval = setInterval(() => {
        currentIndex = (currentIndex + 1) % videos.length;
        videoPlayer.src = videos[currentIndex];
        loadingImage.src = images[currentIndex % images.length];
        playVideo("video-player"); // Play the currently loaded video
      }, 1000); // Switch every second

      // Hide videos and images after 5 seconds
      setTimeout(() => {
        document.getElementById("video-player").style.display = "none";
        document.getElementById("loading-image").style.display = "none";

        // Display Happy New Year message
        loadingMessage.innerHTML = "Happy Birthday to Me!";

        // Show the main content after another 3 seconds
        setTimeout(() => {
          document.getElementById("loading-screen").style.display = "none";
          document.getElementById("main-content").style.display = "block";
        }, 3000); // Wait 3 seconds before showing the main content
      }, 5000); // 5 seconds for videos and images
    }

    // Trigger the animation for the message
    setTimeout(() => {
      loadingMessage.innerHTML = "Happy Birthday to Me!";
      startSlideshow();
    }, 3000); // Delay 3 seconds for the greeting message animation
  };
</script>

{% endblock %}
